---
import type { Article } from '@quest/db';

interface Props {
  article: Article;
}

const { article } = Astro.props;
const publishDate = article.created_at
  ? new Date(article.created_at).toLocaleDateString('en-GB', {
      year: 'numeric',
      month: 'long',
      day: 'numeric',
    })
  : '';
---

<article class="card lg:card-side bg-base-100 shadow-xl hover:shadow-2xl transition-all duration-300 overflow-hidden group">
  {/* Featured image */}
  {
    article.featured_image_url && (
      <figure class="lg:w-1/2">
        <img
          src={article.featured_image_url}
          alt={article.title || article.headline_title}
          class="w-full h-64 lg:h-full object-cover group-hover:scale-105 transition-transform duration-500"
          loading="lazy"
        />
      </figure>
    )
  }

  {/* Content */}
  <div class="card-body lg:w-1/2">
    {/* Badge */}
    <div class="mb-2">
      <span class="badge badge-primary badge-lg">Featured</span>
    </div>

    {/* Title */}
    <h2 class="card-title text-3xl lg:text-4xl font-bold line-clamp-2 group-hover:text-primary transition-colors">
      <a href={`/${article.slug}`} class="hover:underline">
        {article.title || article.headline_title}
      </a>
    </h2>

    {/* Excerpt */}
    {
      article.excerpt && (
        <p class="text-base-content/80 text-lg line-clamp-3">{article.excerpt}</p>
      )
    }

    {/* Metadata */}
    <div class="card-actions justify-between items-center mt-4">
      <div class="flex items-center gap-3 text-sm text-base-content/60">
        {publishDate && <time datetime={article.created_at}>{publishDate}</time>}
        {article.reading_time_minutes && (
          <>
            <span>â€¢</span>
            <span>{article.reading_time_minutes} min read</span>
          </>
        )}
      </div>

      <a href={`/${article.slug}`} class="btn btn-primary btn-sm">
        Read More
        <svg
          xmlns="http://www.w3.org/2000/svg"
          class="h-4 w-4"
          fill="none"
          viewBox="0 0 24 24"
          stroke="currentColor"
        >
          <path
            stroke-linecap="round"
            stroke-linejoin="round"
            stroke-width="2"
            d="M9 5l7 7-7 7"></path>
        </svg>
      </a>
    </div>
  </div>
</article>
